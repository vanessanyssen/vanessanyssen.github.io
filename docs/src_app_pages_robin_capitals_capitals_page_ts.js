"use strict";(self.webpackChunkrobin=self.webpackChunkrobin||[]).push([["src_app_pages_robin_capitals_capitals_page_ts"],{328:(z,A,p)=>{p.r(A),p.d(A,{default:()=>P});var o=p(7691),t=p(4650),r=p(4006),i=p(6076),c=p(1117),m=p(7244),y=p(7582),f=p(6895),Z=p(2778),M=p(9492),u=p(5079),d=p(9377),v=p(5158);function F(e,n){if(1&e&&(t.TgZ(0,"tr",10)(1,"th",11),t._uU(2),t.qZA(),t.TgZ(3,"td",12)(4,"vw-form-field")(5,"div",13),t._UZ(6,"input",14),t.ALo(7,"t9n"),t.TgZ(8,"span",15),t._UZ(9,"i",16),t.qZA()()()(),t.TgZ(10,"td",12)(11,"vw-form-field")(12,"div",13),t._UZ(13,"input",17),t.TgZ(14,"span",15),t._UZ(15,"i",18),t.qZA()()()(),t.TgZ(16,"td",12)(17,"vw-form-field"),t._UZ(18,"select",19),t.ALo(19,"t9n"),t.qZA()(),t.TgZ(20,"td",20),t._UZ(21,"app-form-array-remove-row",21),t.qZA()()),2&e){const a=n.$implicit,s=n.index,l=t.oxw();t.s9C("formGroupName",s),t.xp6(2),t.Oqu(s+1),t.xp6(4),t.s9C("placeholder",t.lcZ(7,16,l.t.FORM.DATE_FORMAT)),t.Q6J("formControl",a.controls.date)("inputMask",l.dateMask.options)("overriddenMessages",l.dateMask.errorMessage)("dynMaxDate",l.dynMaxDate),t.xp6(7),t.s9C("placeholder",l.currencyLongMask.inputPlaceholder),t.Q6J("formControl",a.controls.amount)("inputMask",l.currencyLongMask.options),t.xp6(5),t.s9C("placeholder",t.lcZ(19,18,l.t.FORM.CHOOSE)),t.Q6J("formControl",a.controls.percentage)("options",l.percentages)("selectedOption",a.value.percentage),t.xp6(3),t.Q6J("vwVisibleIf",l.arrayFormRows.length>1)("rowIndex",s)}}class g{constructor(){(0,o.Z)(this,"formGroupDirective",(0,t.f3M)(r.sg)),(0,o.Z)(this,"currencyLongMask",Z.Ox),(0,o.Z)(this,"dateMask",Z.X8),(0,o.Z)(this,"percentages",(0,m.s0)(M.re)),(0,o.Z)(this,"t",(0,t.f3M)(d.OS)),(0,o.Z)(this,"arrayFormRows",void 0),(0,o.Z)(this,"dynMaxDate",void 0),(0,o.Z)(this,"newItemFactory",void 0)}ngOnInit(){this.arrayFormRows=this.formGroupDirective.form.controls.items.controls}}(0,o.Z)(g,"\u0275fac",function(n){return new(n||g)}),(0,o.Z)(g,"\u0275cmp",t.Xpm({type:g,selectors:[["app-capitals-form-array"]],inputs:{dynMaxDate:"dynMaxDate",newItemFactory:"newItemFactory"},standalone:!0,features:[t._Bn([],[{provide:r.gN,useExisting:r.sg}]),t.jDz],decls:27,vars:17,consts:[["appFormArrayErrorsContainer","",1,"table-responsive","mb-3"],["formArrayName","items",1,"table"],[1,"caption-top"],["scope","col"],[1,"none"],["id","date",1,"required"],["id","amount",1,"required"],["id","percentage",1,"required"],[3,"newItemFactory"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["scope","row",1,"mw-xs"],[1,"mw-lg"],["appFormControlErrorsContainer","",1,"input-group"],["type","text","aria-labelledby","date",1,"form-control",3,"formControl","placeholder","inputMask","overriddenMessages","dynMaxDate"],[1,"input-group-text"],[1,"fa-regular","fa-calendar-check"],["vwResetValueIfEmpty","","type","text","aria-labelledby","amount",1,"form-control",3,"formControl","inputMask","placeholder"],[1,"fa-solid","fa-euro-sign"],["aria-labelledby","percentage",1,"form-select",3,"formControl","placeholder","options","selectedOption"],[1,"mw-xs"],[3,"vwVisibleIf","rowIndex"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"caption",2),t._uU(3),t.ALo(4,"t9n"),t.qZA(),t.TgZ(5,"thead")(6,"tr")(7,"th",3)(8,"label",4),t._uU(9),t.ALo(10,"t9n"),t.qZA()(),t.TgZ(11,"th",3)(12,"label",5),t._uU(13),t.ALo(14,"t9n"),t.qZA()(),t.TgZ(15,"th",3)(16,"label",6),t._uU(17),t.ALo(18,"t9n"),t.qZA()(),t.TgZ(19,"th",3)(20,"label",7),t._uU(21),t.ALo(22,"t9n"),t.qZA()(),t.TgZ(23,"th",3),t._UZ(24,"app-form-array-add-row",8),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,F,22,20,"tr",9),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,7,a.t.DOMAIN.CAPITALS)),t.xp6(6),t.Oqu(t.lcZ(10,9,a.t.FORM.ROW_NUMBER)),t.xp6(4),t.Oqu(t.lcZ(14,11,a.t.CAPITALS.date)),t.xp6(4),t.Oqu(t.lcZ(18,13,a.t.CAPITALS.amount)),t.xp6(4),t.Oqu(t.lcZ(22,15,a.t.CAPITALS.percentage)),t.xp6(3),t.Q6J("newItemFactory",a.newItemFactory),t.xp6(2),t.Q6J("ngForOf",a.arrayFormRows))},dependencies:[f.ax,r.UX,r.Fj,r.EJ,r.JJ,r.JL,r.oH,r.x0,r.CE,i.Zg,i.tS,i.wh,i.tJ,u.hg,u.LW,u.vA,u.go,u.OY,u.IQ,v.zz,v.J6,Z.t4,i.$9,i.Uw,c.zm,d.Oj],encapsulation:2,changeDetection:0})),(0,y.gn)([c.aH],g.prototype,"dynMaxDate",void 0),(0,y.gn)([c.aH],g.prototype,"newItemFactory",void 0);class C{constructor(){(0,o.Z)(this,"formGroupDirective",(0,t.f3M)(r.sg)),(0,o.Z)(this,"inssMask",Z.kn),(0,o.Z)(this,"monthMask",Z.Cy),(0,o.Z)(this,"t",(0,t.f3M)(d.OS)),(0,o.Z)(this,"ctrls",void 0),(0,o.Z)(this,"dynMaxDate",void 0),(0,o.Z)(this,"dynMaxDateChange",new t.vpe)}ngOnInit(){this.ctrls=this.formGroupDirective.form.controls}emitMaxDateChange(n){const a=n?n.value:"";this.dynMaxDateChange.emit(a?(0,m.t3)(a):(0,m.Lg)())}}(0,o.Z)(C,"\u0275fac",function(n){return new(n||C)}),(0,o.Z)(C,"\u0275cmp",t.Xpm({type:C,selectors:[["app-capitals-form-inline"]],inputs:{dynMaxDate:"dynMaxDate"},outputs:{dynMaxDateChange:"dynMaxDateChange"},standalone:!0,features:[t._Bn([],[{provide:r.gN,useExisting:r.sg}]),t.jDz],decls:16,vars:16,consts:[[1,"row","g-2"],[1,"col-xl-3","col-lg-4","col-md-6","mb-3"],["labelClass","form-label",3,"label"],["appFormControlErrorsContainer","",1,"input-group"],["type","text",1,"form-control",3,"formControl","inputMask","placeholder","overriddenMessages","blur"],[1,"input-group-text"],[1,"fa-regular","fa-calendar-check"],["type","text",1,"form-control",3,"formControl","inputMask","placeholder","overriddenMessages"],[1,"fa-solid","fa-id-card"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"vw-form-field",2),t.ALo(3,"t9n"),t.TgZ(4,"div",3)(5,"input",4),t.NdJ("blur",function(l){return a.emitMaxDateChange(l.target)}),t.ALo(6,"t9n"),t.qZA(),t.TgZ(7,"span",5),t._UZ(8,"i",6),t.qZA()()()(),t.TgZ(9,"div",1)(10,"vw-form-field",2),t.ALo(11,"t9n"),t.TgZ(12,"div",3),t._UZ(13,"input",7),t.TgZ(14,"span",5),t._UZ(15,"i",8),t.qZA()()()()()),2&n&&(t.xp6(2),t.s9C("label",t.lcZ(3,10,a.t.CAPITALS.startMonth)),t.xp6(3),t.s9C("placeholder",t.lcZ(6,12,a.t.FORM.MONTH_FORMAT)),t.Q6J("formControl",a.ctrls.startMonth)("inputMask",a.monthMask.options)("overriddenMessages",a.monthMask.errorMessage),t.xp6(5),t.s9C("label",t.lcZ(11,14,a.t.CAPITALS.inss)),t.xp6(3),t.s9C("placeholder",a.inssMask.inputPlaceholder),t.Q6J("formControl",a.ctrls.inss)("inputMask",a.inssMask.options)("overriddenMessages",a.inssMask.errorMessage))},dependencies:[r.UX,r.Fj,r.JJ,r.oH,i.Zg,i.tS,u.hg,u.LW,u.vA,u.IQ,v.zz,v.J6,d.Oj],encapsulation:2,changeDetection:0})),(0,y.gn)([c.aH],C.prototype,"dynMaxDate",void 0);var T=p(663);function _(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"th",5),t._uU(2),t.ALo(3,"t9n"),t.ALo(4,"get"),t.qZA(),t.BQk()),2&e){const a=n.$implicit,s=t.oxw();t.xp6(1),t.Gre("text-end pe-4 ",a.value.class,""),t.xp6(1),t.hij(" ",t.lcZ(3,4,t.xi3(4,6,s.t[s.prefix],a.key)),"")}}function O(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"apply"),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Gre("text-end pe-4 ",a.value.class,""),t.xp6(1),t.hij(" ",t.Dn7(3,4,a.value.data,a.value.pipe,a.value.args),"")}}function D(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.qZA(),t.YNc(3,O,4,8,"ng-container",3),t.ALo(4,"keyvalue"),t.qZA()),2&e){const a=n.$implicit,s=n.index,l=t.oxw();t.xp6(2),t.Oqu(s+1),t.xp6(1),t.Q6J("ngForOf",t.xi3(4,2,a,l.sort))}}function b(e,n){if(1&e&&(t.TgZ(0,"th",9),t._uU(1),t.ALo(2,"t9n"),t.qZA()),2&e){const a=t.oxw().count,s=t.oxw();t.uIk("colspan",a),t.xp6(1),t.Oqu(t.lcZ(2,2,s.t.CAPITALS.total))}}function w(e,n){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"apply"),t.qZA()),2&e){const a=t.oxw(2);t.Gre("text-end px-4 ",a.result.total.class,""),t.xp6(1),t.hij(" ",t.Dn7(2,4,a.result.total.data,a.result.total.pipe,a.result.total.args),"")}}function I(e,n){if(1&e&&(t.ynx(0),t.YNc(1,b,3,4,"th",7),t.YNc(2,w,3,8,"td",8),t.BQk()),2&e){const a=n.first,s=n.last;t.xp6(1),t.Q6J("ngIf",a),t.xp6(1),t.Q6J("ngIf",s)}}class h{constructor(){(0,o.Z)(this,"prefix",(0,t.f3M)(T.pv).getValue()),(0,o.Z)(this,"sort",m.qF),(0,o.Z)(this,"t",(0,t.f3M)(d.OS)),(0,o.Z)(this,"result",void 0)}}(0,o.Z)(h,"\u0275fac",function(n){return new(n||h)}),(0,o.Z)(h,"\u0275cmp",t.Xpm({type:h,selectors:[["app-capitals-form-response"]],inputs:{result:"result"},standalone:!0,features:[t.jDz],decls:15,vars:12,consts:[[1,"table-responsive","mb-3"],[1,"table","table-sm","w-auto"],["scope","col",1,"text-end","pe-4"],[4,"ngFor","ngForOf"],[1,"result"],["scope","col"],[1,"text-end","pe-4"],["scope","row","class","pe-4",4,"ngIf"],[3,"class",4,"ngIf"],["scope","row",1,"pe-4"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5),t.ALo(6,"t9n"),t.qZA(),t.YNc(7,_,5,9,"ng-container",3),t.ALo(8,"keyvalue"),t.qZA()(),t.TgZ(9,"tbody"),t.YNc(10,D,5,5,"tr",3),t.qZA(),t.TgZ(11,"tfoot")(12,"tr",4),t.YNc(13,I,3,2,"ng-container",3),t.ALo(14,"keyvalue"),t.qZA()()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,4,a.t.FORM.ROW_NUMBER)),t.xp6(2),t.Q6J("ngForOf",t.xi3(8,6,a.result.rents[0],a.sort)),t.xp6(3),t.Q6J("ngForOf",a.result.rents),t.xp6(3),t.Q6J("ngForOf",t.xi3(14,9,a.result.rents[0],a.sort)))},dependencies:[f.ax,f.O5,d.Oj,f.Nd,c.bZ,c.JW],encapsulation:2,changeDetection:0})),(0,y.gn)([c.aH],h.prototype,"result",void 0);var x=p(3823),q=p(2860);let J=(()=>{class e{constructor(){(0,o.Z)(this,"api",(0,t.f3M)(q._y))}getResult(a){return this.api.post(this.api.endpoints.capitals,a)}}return(0,o.Z)(e,"\u0275fac",function(a){return new(a||e)}),(0,o.Z)(e,"\u0275prov",t.Yz7({token:e,factory:e.\u0275fac})),e})();const N=e=>({startDate:(0,m.Vn)(e.startMonth),inss:(0,m.bI)(e.inss),capitals:e.items.map(n=>({date:(0,m.Vn)(n.date),amount:(0,m.W_)(n.amount),percentage:parseFloat(n.percentage)}))}),R=e=>({form:{startMonth:{data:e.startMonth},inss:{data:e.inss}},array:e.items.map(n=>({date:{data:n.date},amount:{data:(0,m.R3)(n.amount,"\xa0\u20ac")},percentage:{data:n.percentage?.trim()}}))}),k=e=>({rents:e.rents.map(n=>({recent:{data:n.recent,pipe:"t9nEnum"},date:{data:(0,m.O4)(n.date)},age:{data:n.age||"",pipe:"beNumber",args:"0"},amount:{data:n.amount,pipe:"beNumber",args:"4"},percentage:{data:n.percentage?n.percentage/100:"",pipe:"bePercent",args:"0"},rate:{data:n.rate?n.rate/100:"",pipe:"bePercent",args:"4"},rent:{data:n.rent,pipe:"beNumber",args:"4"}})),total:{data:e.total,pipe:"beNumber"}});function Q(e,n){1&e&&t._UZ(0,"app-capitals-form-response",4),2&e&&t.Q6J("result",n.$implicit)}let j=(()=>{class e{constructor(){(0,o.Z)(this,"injector",(0,t.f3M)(t.lqb)),(0,o.Z)(this,"formArray",void 0),(0,o.Z)(this,"form",function U(){const e=(0,t.f3M)(r.qu);return e.group({startMonth:e.nonNullable.control("",{validators:[r.kI.required,x.D0.min(M.pw),x.D0.max((0,m.nD)())],updateOn:"blur"}),inss:e.nonNullable.control("",{validators:[r.kI.required,x.Qk.inss],updateOn:"blur"}),items:e.nonNullable.array([])})}()),(0,o.Z)(this,"newItemFactory",()=>this.injector.runInContext(()=>function L(){const e=(0,t.f3M)(r.qu);return e.group({date:e.nonNullable.control("",{validators:[r.kI.required,x.D0.min(M.P1)],updateOn:"blur"}),amount:e.nonNullable.control("",r.kI.required),percentage:e.control(null,r.kI.required)})}())),(0,o.Z)(this,"CapitalsView",void 0),(0,o.Z)(this,"dynMaxDate",(0,m.Lg)())}ngOnInit(){this.formArray=this.form.controls.items,this.formArray.push(this.newItemFactory())}resetForm(){this.dynMaxDate=(0,m.Lg)(),this.formArray.clear(),this.formArray.push(this.newItemFactory())}}return(0,o.Z)(e,"\u0275fac",function(a){return new(a||e)}),(0,o.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-capitals-container"]],standalone:!0,features:[t._Bn([],[(0,i.Po)(J),(0,i.N3)(R),(0,i.sj)(N),(0,i.nx)(k)]),t.jDz],decls:4,vars:5,consts:[[3,"formGroup","isReset"],[3,"dynMaxDate","dynMaxDateChange"],[3,"newItemFactory","dynMaxDate"],[3,"typeOf"],[3,"result"]],template:function(a,s){1&a&&(t.TgZ(0,"app-base-form-container",0),t.NdJ("isReset",function(){return s.resetForm()}),t.TgZ(1,"app-capitals-form-inline",1),t.NdJ("dynMaxDateChange",function(S){return s.dynMaxDate=S}),t.qZA(),t._UZ(2,"app-capitals-form-array",2),t.YNc(3,Q,1,1,"ng-template",3),t.qZA()),2&a&&(t.Q6J("formGroup",s.form),t.xp6(1),t.Q6J("dynMaxDate",s.dynMaxDate),t.xp6(1),t.Q6J("newItemFactory",s.newItemFactory)("dynMaxDate",s.dynMaxDate),t.xp6(1),t.Q6J("typeOf",s.CapitalsView))},dependencies:[r.UX,r.JL,r.sg,i.wM,C,g,c.Co,h],encapsulation:2,changeDetection:0})),e})(),P=(()=>{class e extends((0,M.Y2)()){}return(0,o.Z)(e,"\u0275fac",function(){let n;return function(s){return(n||(n=t.n5z(e)))(s||e)}}()),(0,o.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["page-capitals"]],standalone:!0,features:[t.qOj,t.jDz],decls:1,vars:0,template:function(a,s){1&a&&t._UZ(0,"app-capitals-container")},dependencies:[j],encapsulation:2,changeDetection:0})),e})()}}]);