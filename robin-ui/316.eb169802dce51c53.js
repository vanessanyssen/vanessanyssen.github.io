"use strict";(self.webpackChunkrobin=self.webpackChunkrobin||[]).push([[316],{3316:(k,u,r)=>{r.r(u),r.d(u,{AmountsPage:()=>X});var i=r(6895),t=r(4650),f=r(4004),x=r(8502),g=r(262),_=r(9646),E=r(655),p=r(7508),A=r(8723),h=r(7600),s=r(4290),d=r(3416),L=r(3476);function I(n,a){if(1&n&&(t.TgZ(0,"th",9),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"t9nIn"),t.qZA()),2&n){const e=a.ngIf,o=t.oxw().$implicit,c=t.oxw(2);t.Tol(e.class),t.xp6(1),t.hij(" ",t.lcZ(2,3,t.xi3(3,5,o.key,c.t[c.prefix]))," ")}}function Q(n,a){if(1&n&&(t.ynx(0),t.YNc(1,I,4,8,"th",8),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.value)}}function N(n,a){if(1&n&&(t.TgZ(0,"td",9),t._uU(1),t.ALo(2,"dynamicPipe"),t.qZA()),2&n){const e=a.ngIf;t.Tol(e.class),t.xp6(1),t.hij(" ",t.Dn7(2,3,e.data,e.pipe,e.args)," ")}}function $(n,a){if(1&n&&(t.ynx(0),t.YNc(1,N,3,7,"td",8),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.value)}}function O(n,a){if(1&n&&(t.TgZ(0,"td",9),t._uU(1),t.ALo(2,"dynamicPipe"),t.qZA()),2&n){const e=a.ngIf;t.Tol(e.class),t.xp6(1),t.hij(" ",t.Dn7(2,3,e.data,e.pipe,e.args)," ")}}function J(n,a){if(1&n&&(t.ynx(0),t.YNc(1,O,3,7,"td",8),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.value)}}function w(n,a){if(1&n&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t.YNc(2,J,2,1,"ng-container",7),t.ALo(3,"keyvalue"),t.qZA()),2&n){const e=a.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,e,o.sort))}}function D(n,a){if(1&n&&(t.ynx(0),t.YNc(1,w,4,4,"tr",7),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.children)}}function F(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",10),t.NdJ("click",function(){const y=t.CHM(e).index,C=t.oxw(2);return t.KtG(C.isExpanded[y]=!C.isExpanded[y])}),t.TgZ(2,"td"),t._UZ(3,"i",11),t.qZA(),t.YNc(4,$,2,1,"ng-container",7),t.ALo(5,"keyvalue"),t.qZA(),t.YNc(6,D,2,1,"ng-container",12),t.BQk()}if(2&n){const e=a.$implicit,o=a.index,c=t.oxw(2);t.xp6(3),t.Tol("fa-square-"+(c.isExpanded[o]?"minus":"plus")),t.xp6(1),t.Q6J("ngForOf",t.xi3(5,4,e.parent,c.sort)),t.xp6(2),t.Q6J("ngIf",c.isExpanded[o])}}function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"table",1)(1,"caption",2),t.Hsn(2),t.TgZ(3,"div",3)(4,"input",4),t.NdJ("change",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.expandAll(c.data.length))}),t.qZA(),t.TgZ(5,"label",5),t._uU(6),t.qZA()()(),t.TgZ(7,"thead")(8,"tr"),t._UZ(9,"th",6),t.YNc(10,Q,2,1,"ng-container",7),t.ALo(11,"keyvalue"),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,F,7,7,"ng-container",7),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("id",e.uid),t.xp6(1),t.Q6J("for",e.uid),t.xp6(1),t.Oqu(e.expandLabel),t.xp6(4),t.Q6J("ngForOf",t.xi3(11,5,e.data[0].parent,e.sort)),t.xp6(3),t.Q6J("ngForOf",e.data)}}const S=[[["","vwCaption",""]]];class l{constructor(){this.toExpand=!0,this.prefix=(0,t.f3M)(h.pv).getValue(),this.t=(0,t.f3M)(p.$z),this.uid=(0,t.f3M)(p.KM).simpleRandomId,this.expandLabel="Expand all",this.isExpanded=[!0],this.sort=A.qF}expandAll(a){this.isExpanded=Array.from({length:a},e=>this.toExpand),this.toExpand=!this.toExpand}}l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-expandable-table"]],inputs:{expandLabel:"expandLabel",isExpanded:"isExpanded",sort:"sort",data:"data"},standalone:!0,features:[t.jDz],ngContentSelectors:["[vwCaption]"],decls:1,vars:1,consts:[["class","table table-sm",4,"ngIf"],[1,"table","table-sm"],[1,"caption-top"],["vwNoPrint","",1,"form-check","form-switch","form-check-reverse","float-end","me-2"],["type","checkbox",1,"form-check-input",3,"id","change"],[1,"form-check-label",3,"for"],[2,"max-width","25px"],[4,"ngFor","ngForOf"],["class","text-end pe-4",3,"class",4,"ngIf"],[1,"text-end","pe-4"],[1,"row-button",3,"click"],[1,"fa-regular"],[4,"ngIf"]],template:function(a,e){1&a&&(t.F$t(S),t.YNc(0,M,14,8,"table",0)),2&a&&t.Q6J("ngIf",e.data[0])},dependencies:[i.O5,i.ax,i.Nd,p.H7,d.aw,d.X$,s.mK,L.e,s.Hr],encapsulation:2,changeDetection:0}),(0,E.gn)([s.aH],l.prototype,"data",void 0);var b=r(8453),m=r(167);let v=(()=>{class n{constructor(){this.api=(0,t.f3M)(p.SZ)}getHouseholdAmountsByStartDate(){return this.api.query(this.api.endpoints.groupAmounts,{by:"startDate",filter:"household"})}getMedicalAmountsByStartDate(){return this.api.query(this.api.endpoints.groupAmounts,{by:"startDate",filter:"medical"})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const T=n=>n.map(a=>({parent:Z(a.parent),children:a.children.map(e=>Z(e))})),Z=n=>({startDate:{data:n.startDate&&(0,A.O4)(n.startDate)},category:{data:n.category,pipe:"enum"},amount:{data:n.amount,pipe:"currency"}});function Y(n,a){if(1&n&&(t.TgZ(0,"div",5)(1,"app-expandable-table",6),t.ALo(2,"translate"),t.TgZ(3,"span",7),t._uU(4),t.ALo(5,"translate"),t.qZA()()()),2&n){const e=a.ngIf,o=t.oxw();t.xp6(1),t.Q6J("data",e)("expandLabel",t.lcZ(2,3,o.t.FORM.EXPAND_ALL)),t.xp6(3),t.Oqu(t.lcZ(5,5,o.t.AMOUNTS.medicalCategories))}}function H(n,a){1&n&&t._UZ(0,"app-form-response-error",8),2&n&&t.Q6J("error",a.ngIf)}function P(n,a){if(1&n&&(t.TgZ(0,"div",5)(1,"app-expandable-table",6),t.ALo(2,"translate"),t.TgZ(3,"span",7),t._uU(4),t.ALo(5,"translate"),t.qZA()()()),2&n){const e=a.ngIf,o=t.oxw();t.xp6(1),t.Q6J("data",e)("expandLabel",t.lcZ(2,3,o.t.FORM.EXPAND_ALL)),t.xp6(3),t.Oqu(t.lcZ(5,5,o.t.AMOUNTS.householdCategories))}}function B(n,a){1&n&&t._UZ(0,"app-form-response-error",8),2&n&&t.Q6J("error",a.ngIf)}let K=(()=>{class n{constructor(){this.allowanceAmountsService=(0,t.f3M)(v),this.loadingState$=(0,t.f3M)(h.vw).state$,this.t=(0,t.f3M)(p.$z)}ngOnInit(){this.medicalAmounts$=this.allowanceAmountsService.getMedicalAmountsByStartDate().pipe((0,f.U)(e=>T(e))),this.errorMedical$=this.medicalAmounts$.pipe((0,x.l)(),(0,g.K)(e=>(0,_.of)(e))),this.householdAmounts$=this.allowanceAmountsService.getHouseholdAmountsByStartDate().pipe((0,f.U)(e=>T(e))),this.errorHousehold$=this.householdAmounts$.pipe((0,x.l)(),(0,g.K)(e=>(0,_.of)(e)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-amounts-container"]],standalone:!0,features:[t._Bn([v]),t.jDz],decls:16,vars:18,consts:[[1,"row"],[1,"col-xl-6","col-12","col-print-6"],["class","table-responsive mb-3",4,"ngIf"],[3,"error",4,"ngIf"],["vwNoPrint","",1,"float-end",3,"disabled"],[1,"table-responsive","mb-3"],[3,"data","expandLabel"],["vwCaption","",1,"h5","text-dark"],[3,"error"]],template:function(e,o){1&e&&(t.TgZ(0,"vw-card")(1,"div",0)(2,"div",1),t.YNc(3,Y,6,7,"div",2),t.ALo(4,"async"),t.YNc(5,H,1,1,"app-form-response-error",3),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",1),t.YNc(8,P,6,7,"div",2),t.ALo(9,"async"),t.YNc(10,B,1,1,"app-form-response-error",3),t.ALo(11,"async"),t.qZA()(),t.TgZ(12,"vw-print-button",4),t.ALo(13,"async"),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,6,o.medicalAmounts$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,8,o.errorMedical$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,10,o.householdAmounts$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,12,o.errorHousehold$)),t.xp6(2),t.Q6J("disabled",!!t.lcZ(13,14,o.loadingState$)),t.xp6(2),t.Oqu(t.lcZ(15,16,o.t.FORM.PRINT)))},dependencies:[i.O5,i.Ov,d.aw,d.X$,m.Ak,s.mK,b.Ty,l,s.Hr,m.Lz],encapsulation:2,changeDetection:0}),n})();var z=r(7402);let X=(()=>{class n extends((0,z.Y2)()){}return n.\u0275fac=function(){let a;return function(o){return(a||(a=t.n5z(n)))(o||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["page-amounts"]],standalone:!0,features:[t.qOj,t.jDz],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"app-amounts-container")},dependencies:[K],encapsulation:2,changeDetection:0}),n})()}}]);